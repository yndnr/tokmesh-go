apiVersion: v1
kind: ConfigMap
metadata:
  name: tokmesh-config
  namespace: default
  labels:
    app: tokmesh
data:
  config.yaml: |
    server:
      http:
        enabled: true
        address: "0.0.0.0:5080"
      https:
        enabled: false
        address: "0.0.0.0:5443"
      redis:
        enabled: true
        address: "0.0.0.0:6379"
      cluster:
        enabled: true
        address: "0.0.0.0:5343"

    storage:
      data_dir: "/var/lib/tokmesh-server"
      wal:
        enabled: true
        sync_interval: "100ms"
      snapshot:
        enabled: true
        interval: "1h"
        keep: 3

    security:
      api_keys_enabled: true
      tls_ca_file: ""

    session:
      default_ttl: "24h"
      max_ttl: "168h"
      cleanup_interval: "5m"

    log:
      level: "info"
      format: "json"
      output: "stdout"

    telemetry:
      metrics:
        enabled: true
        address: "0.0.0.0:9090"
        path: "/metrics"
